{"ast":null,"code":"import { webSocket } from 'rxjs/webSocket';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nexport class WebSocketService {\n  constructor() {\n    this.receivedData = [];\n  }\n  connect() {\n    if (!this.socket$ || this.socket$.closed) {\n      this.socket$ = webSocket(environment.webSocketUrl);\n      this.socket$.subscribe(data => {\n        this.receivedData.push(data);\n        this.currentData = data;\n      });\n    }\n  }\n  sendMessage(message) {\n    this.socket$.next({\n      message\n    });\n  }\n  close() {\n    this.socket$.complete();\n  }\n  conectarWsLento() {\n    if (!this.socketLento$ || this.socketLento$.closed) {\n      this.socketLento$ = webSocket(\"ws://localhost:8000/wsLento\");\n      this.socketLento$.subscribe(data => {\n        this.valorAtual = data;\n      });\n    }\n  }\n  iniciarComunicacao(message) {\n    this.socketLento$.next({\n      message\n    });\n  }\n  fecharComunicacao() {\n    this.socketLento$.complete();\n  }\n}\nWebSocketService.ɵfac = function WebSocketService_Factory(t) {\n  return new (t || WebSocketService)();\n};\nWebSocketService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: WebSocketService,\n  factory: WebSocketService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AACA,SAASA,SAAS,QAA0B,gBAAgB;AAC5D,SAASC,WAAW,QAAQ,8BAA8B;;AAQ1D,OAAM,MAAOC,gBAAgB;EAH7BC;IAMS,iBAAY,GAAkB,EAAE;;EAKhCC,OAAO;IACZ,IAAI,CAAC,IAAI,CAACC,OAAO,IAAI,IAAI,CAACA,OAAO,CAACC,MAAM,EAAE;MACxC,IAAI,CAACD,OAAO,GAAGL,SAAS,CAACC,WAAW,CAACM,YAAY,CAAC;MAElD,IAAI,CAACF,OAAO,CAACG,SAAS,CAAEC,IAAiB,IAAI;QAC3C,IAAI,CAACC,YAAY,CAACC,IAAI,CAACF,IAAI,CAAC;QAC5B,IAAI,CAACG,WAAW,GAAGH,IAAI;MACzB,CAAC,CAAC;;EAEN;EAEAI,WAAW,CAACC,OAAe;IACzB,IAAI,CAACT,OAAO,CAACU,IAAI,CAAC;MAAED;IAAO,CAAE,CAAC;EAChC;EAEAE,KAAK;IACH,IAAI,CAACX,OAAO,CAACY,QAAQ,EAAE;EACzB;EAEOC,eAAe;IACpB,IAAI,CAAC,IAAI,CAACC,YAAY,IAAI,IAAI,CAACA,YAAY,CAACb,MAAM,EAAE;MAClD,IAAI,CAACa,YAAY,GAAGnB,SAAS,CAAC,6BAA6B,CAAC;MAE5D,IAAI,CAACmB,YAAY,CAACX,SAAS,CAAEC,IAAiB,IAAI;QAChD,IAAI,CAACW,UAAU,GAAGX,IAAI;MACxB,CAAC,CAAC;;EAEN;EAEAY,kBAAkB,CAACP,OAAe;IAChC,IAAI,CAACK,YAAY,CAACJ,IAAI,CAAC;MAAED;IAAO,CAAE,CAAC;EACrC;EAEAQ,iBAAiB;IACf,IAAI,CAACH,YAAY,CAACF,QAAQ,EAAE;EAC9B;;AA3CWf,gBAAgB;mBAAhBA,gBAAgB;AAAA;AAAhBA,gBAAgB;SAAhBA,gBAAgB;EAAAqB,SAAhBrB,gBAAgB;EAAAsB,YAFf;AAAM","names":["webSocket","environment","WebSocketService","constructor","connect","socket$","closed","webSocketUrl","subscribe","data","receivedData","push","currentData","sendMessage","message","next","close","complete","conectarWsLento","socketLento$","valorAtual","iniciarComunicacao","fecharComunicacao","factory","providedIn"],"sourceRoot":"","sources":["/home/pedro/Documentos/demoLab/src/app/web-socket.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { webSocket, WebSocketSubject } from 'rxjs/webSocket';\nimport { environment } from 'src/environments/environment';\ninterface MessageData {\n  message: number;\n  time?: string;\n}\n@Injectable({\n  providedIn: 'root'\n})\nexport class WebSocketService {\n\n  private socket$!: WebSocketSubject<any>;\n  public receivedData: MessageData[] = [];\n  currentData!: MessageData;\n  private socketLento$!: WebSocketSubject<any>;\n  valorAtual!: MessageData;\n\n  public connect(): void {\n    if (!this.socket$ || this.socket$.closed) {\n      this.socket$ = webSocket(environment.webSocketUrl);\n\n      this.socket$.subscribe((data: MessageData) => {\n        this.receivedData.push(data);\n        this.currentData = data;\n      });\n    }\n  }\n\n  sendMessage(message: string) {\n    this.socket$.next({ message });\n  }\n\n  close() {\n    this.socket$.complete();\n  }\n\n  public conectarWsLento(): void {\n    if (!this.socketLento$ || this.socketLento$.closed) {\n      this.socketLento$ = webSocket(\"ws://localhost:8000/wsLento\");\n\n      this.socketLento$.subscribe((data: MessageData) => {\n        this.valorAtual = data;\n      });\n    }\n  }\n\n  iniciarComunicacao(message: string) {\n    this.socketLento$.next({ message });\n  }\n\n  fecharComunicacao() {\n    this.socketLento$.complete();\n  }\n \n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}