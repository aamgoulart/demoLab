{"ast":null,"code":"import { BaseChartDirective } from 'ng2-charts';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../web-socket.service\";\nimport * as i2 from \"ng2-charts\";\n// import DataLabelsPlugin from 'chartjs-plugin-datalabels';\nexport class BarChartComponent {\n  constructor(webSocketService) {\n    this.webSocketService = webSocketService;\n    this.barChartOptions = {\n      responsive: true,\n      // We use these empty structures as placeholders for dynamic theming.\n      scales: {\n        x: {},\n        y: {\n          min: -100\n        }\n      },\n      plugins: {\n        legend: {\n          display: true\n        }\n        /*       datalabels: {\n                anchor: 'end',\n                align: 'end'\n              } */\n      }\n    };\n\n    this.barChartType = 'bar';\n    /*   public barChartPlugins = [\n        DataLabelsPlugin\n      ]; */\n    this.barChartData = {\n      labels: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20],\n      datasets: [{\n        data: [65, 59, 80, 81, 56, 55, 40, 30, 25, 20, -10, -20, -40, -50, -20, 10, 35, 40, 50, 60],\n        label: 'Sinal A',\n        barPercentage: 0.09\n      }]\n    };\n    this.webSocketService.connect();\n  }\n  ngOnDestroy() {\n    this.webSocketService.close();\n  }\n  ngOnInit() {}\n  randomize() {\n    // Only Change 3 values\n    this.barChartData.datasets[0].data = [Math.round(Math.random() * 100), 59, 80, Math.round(Math.random() * 100), 56, Math.round(Math.random() * 100), 40];\n    this.chart?.update();\n  }\n  sendMessage(message) {\n    this.webSocketService.sendMessage(message);\n  }\n}\nBarChartComponent.ɵfac = function BarChartComponent_Factory(t) {\n  return new (t || BarChartComponent)(i0.ɵɵdirectiveInject(i1.WebSocketService));\n};\nBarChartComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: BarChartComponent,\n  selectors: [[\"app-bar-chart\"]],\n  viewQuery: function BarChartComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(BaseChartDirective, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.chart = _t.first);\n    }\n  },\n  decls: 2,\n  vars: 3,\n  consts: [[1, \"container\"], [\"baseChart\", \"\", 1, \"chart\", 3, \"data\", \"options\", \"type\"]],\n  template: function BarChartComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelement(1, \"canvas\", 1);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"data\", ctx.barChartData)(\"options\", ctx.barChartOptions)(\"type\", ctx.barChartType);\n    }\n  },\n  dependencies: [i2.BaseChartDirective],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AAEA,SAASA,kBAAkB,QAAQ,YAAY;;;;AAI/C;AAOA,OAAM,MAAOC,iBAAiB;EAE5BC,YAAmBC,gBAAkC;IAAlC,qBAAgB,GAAhBA,gBAAgB;IAgB5B,oBAAe,GAAkC;MACtDC,UAAU,EAAE,IAAI;MAChB;MACAC,MAAM,EAAE;QACNC,CAAC,EAAE,EACF;QACDC,CAAC,EAAE;UACDC,GAAG,EAAE,CAAC;;OAGT;MAEDC,OAAO,EAAE;QACPC,MAAM,EAAE;UACNC,OAAO,EAAE;;QAEjB;;;;;KAKG;;IACM,iBAAY,GAAc,KAAK;IACxC;;;IAIS,iBAAY,GAAqB;MACtCC,MAAM,EAAE,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;MACxEC,QAAQ,EAAE,CACR;QAAGC,IAAI,EAAE,CAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;QAC3FC,KAAK,EAAE,SAAS;QAAGC,aAAa,EAAE;MAAI,CAAE;KAG/C;IAjDC,IAAI,CAACb,gBAAgB,CAACc,OAAO,EAAE;EACjC;EAGAC,WAAW;IACT,IAAI,CAACf,gBAAgB,CAACgB,KAAK,EAAE;EAC/B;EAGAC,QAAQ,IAER;EAwCOC,SAAS;IACd;IACA,IAAI,CAACC,YAAY,CAACT,QAAQ,CAAC,CAAC,CAAC,CAACC,IAAI,GAAG,CACnCS,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAG,GAAG,CAAC,EAC/B,EAAE,EACF,EAAE,EACFF,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAG,GAAG,CAAC,EAC/B,EAAE,EACFF,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAG,GAAG,CAAC,EAC/B,EAAE,CAAE;IAEN,IAAI,CAACC,KAAK,EAAEC,MAAM,EAAE;EACtB;EAEAC,WAAW,CAACC,OAAe;IACzB,IAAI,CAAC1B,gBAAgB,CAACyB,WAAW,CAACC,OAAO,CAAC;EAC5C;;AAtEW5B,iBAAiB;mBAAjBA,iBAAiB;AAAA;AAAjBA,iBAAiB;QAAjBA,iBAAiB;EAAA6B;EAAAC;IAAA;qBAgBjB/B,kBAAkB;;;;;;;;;;;;MC7B/BgC,8BAAuB;MACrBA,4BAIO;MAITA,iBAAM;;;MAPJA,eAAqB;MAArBA,uCAAqB","names":["BaseChartDirective","BarChartComponent","constructor","webSocketService","responsive","scales","x","y","min","plugins","legend","display","labels","datasets","data","label","barPercentage","connect","ngOnDestroy","close","ngOnInit","randomize","barChartData","Math","round","random","chart","update","sendMessage","message","selectors","viewQuery","i0"],"sourceRoot":"","sources":["/home/pedro/Documentos/demoLab/src/app/bar-chart/bar-chart.component.ts","/home/pedro/Documentos/demoLab/src/app/bar-chart/bar-chart.component.html"],"sourcesContent":["import { Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ChartConfiguration, ChartData, ChartEvent, ChartType } from 'chart.js';\nimport { BaseChartDirective } from 'ng2-charts';\nimport { Observable, range } from 'rxjs';\nimport { WebSocketService } from '../web-socket.service';\n\n// import DataLabelsPlugin from 'chartjs-plugin-datalabels';\n\n@Component({\n  selector: 'app-bar-chart',\n  templateUrl: './bar-chart.component.html',\n  styleUrls: [ './bar-chart.component.scss' ],\n})\nexport class BarChartComponent implements OnInit, OnDestroy {\n\n  constructor(public webSocketService: WebSocketService) {\n    this.webSocketService.connect();\n  }\n\n\n  ngOnDestroy() {\n    this.webSocketService.close();\n  }\n\n\n  ngOnInit(): void {\n\n  }\n\n  @ViewChild(BaseChartDirective) chart: BaseChartDirective | undefined;\n\n  public barChartOptions: ChartConfiguration['options'] = {\n    responsive: true,\n    // We use these empty structures as placeholders for dynamic theming.\n    scales: {\n      x: {\n      },// ajuste para alterar a largura das barras},\n      y: {\n        min: -100,\n      },\n\n    },\n\n    plugins: {\n      legend: {\n        display: true,\n      },\n/*       datalabels: {\n        anchor: 'end',\n        align: 'end'\n      } */\n    }\n  };\n  public barChartType: ChartType = 'bar';\n/*   public barChartPlugins = [\n    DataLabelsPlugin\n  ]; */\n\n  public barChartData: ChartData<'bar'> = {\n    labels: [1,2,3,4,5,6,7,8,9, 10, 11 , 12, 13, 14, 15, 16, 17, 18, 19, 20],\n    datasets: [\n      {  data: [ 65, 59, 80, 81, 56, 55, 40 , 30, 25, 20, -10, -20, -40, -50, -20, 10, 35,40, 50, 60]\n        , label: 'Sinal A' , barPercentage: 0.09,}\n    ],\n\n  };\n\n  public randomize(): void {\n    // Only Change 3 values\n    this.barChartData.datasets[0].data = [\n      Math.round(Math.random() * 100),\n      59,\n      80,\n      Math.round(Math.random() * 100),\n      56,\n      Math.round(Math.random() * 100),\n      40 ];\n\n    this.chart?.update();\n  }\n\n  sendMessage(message: string) {\n    this.webSocketService.sendMessage(message);\n  }\n\n  // adicionaNovoElemento(): void {\n  //  this.barChartData.datasets[0].data.push(this.webSocketService.mensagemRecebidaLento.message);\n\n  //  if (this.barChartData.datasets[0].data.length) {\n  //   this.barChartData.datasets[0].data.shift();\n  //  }\n\n  //   this.barChartData?.labels?.push(`${ this.webSocketService.currentData.time }`);\n  //   if (this.barChartData?.labels?.length! > 31) {\n  //     this.barChartData?.labels?.shift();\n  //   }\n\n  //   this.chart?.update();\n  // }\n\n  // startFunction() {\n  //   const intervalId = setInterval(() => {\n  //     this.adicionaNovoElemento();\n  //     console.log(this.webSocketService.currentData);\n  //   }, 500);\n\n  //   setTimeout(() => {\n  //     clearInterval(intervalId);\n  //   }, 30000000);\n  // }\n\n  \n}\n\n","<div class=\"container\">\n  <canvas baseChart class=\"chart\"\n  [data]=\"barChartData\"\n  [options]=\"barChartOptions\"\n  [type]=\"barChartType\">\n</canvas>\n\n<!-- <button mat-button mat-raised-button color=\"primary\" (click)=\"randomize()\">Update</button> -->\n\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}